# 日志(logger)
AfdianBot-Core使用python的`logging`标准库进行log,该记录器的名字为`AfdianBot`,你也可以拿来进行自己的日志记录
```python
import logging
import AfdianBot

logger = logging.getLogger("AfdianBot")
bot = AfdianBot.Bot(account="xxx",password="xxx")

@bot.register("/test")
def test():
    logger.info("这是一条日志")

bot.run()
```
## 默认配置
如下:
```
formatter = logging.Formatter(
    '[%(asctime)s %(levelname)s] %(name)s - %(message)s', # [时间 日志等级] 记录器名 - 日志内容
    datefmt='%Y-%m-%d %H:%M:%S' # 时间格式 如: 2025-01-01 12:00:00
)
```
## 自定义配置
### 禁用警告
可以使用config.disable_warnings()进行禁用
```python
import logging
import AfdianBot

logger = logging.getLogger("AfdianBot")
AfdianBot.config.disable_warnings()
logger.warning("这是一条警告") # 此时不会再输出了
AfdianBot.config.disable_warnings(False)
logger.warning("这是一条警告") # 此时又会输出了
```
### 高级配置
你可以自己配置,以下为一个简单示例,他可以禁用所有INFO日志
```python
import logging

logger = logging.getLogger("AfdianBot")

class Filter(logging.Filter):
    def filter(self, record):
        return record.levelno != logging.INFO # 这里决定是否输出

logger.addFilter(Filter())
logger.info("这是一条info") # 此时不会再输出了
logger.removeFilter(Filter())
logger.info("这是一条info") # 此时又会输出了
```
## 将错误信息通过电子邮件发送给管理员
在实际环境中，当机器人在远程服务器上运行时，你可能不会经常查看日志消息
为了主动发现并修复错误，可以配置一个 logging.handlers.SMTPHandler，当错误或者更高级别的日志被记录下来时就会发送一封电子邮件：

> [!attention]
> 如果你要实际应用，应该确保smtp服务器与其它参数均无误，否则将导致邮件发送失败!

```python
import logging
from logging.handlers import SMTPHandler

logger = logging.getLogger("AfdianBot")

mail_handler = SMTPHandler(
    mailhost='127.0.0.1',
    fromaddr='server-error@example.com',
    toaddrs=['admin@example.com'],
    subject='Application Error'
)
mail_handler.setLevel(logging.ERROR)
mail_handler.setFormatter(logging.Formatter(
    '[%(asctime)s] %(levelname)s in %(module)s: %(message)s'
))

logger.addHandler(mail_handler)
```